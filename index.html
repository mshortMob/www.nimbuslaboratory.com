<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Nimbus Labs</title>
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<style>
		body{
			margin:0px;
			background-color:black;
		}	
		canvas{
			opacity: 1;
			width:100%;
			height:100%;
			top:0px;
			left:0px;
			z-index:0;
			transform:scale(1,1);
			position:fixed;
			float:left;
			object-fit:fill;
			/* cursor: none; */
		}
		.header {
			width:100%;
			display: grid;
			grid-template-columns: auto auto auto auto auto auto auto auto auto auto;
			background-color: black;
			padding: 0px;
			height:60px;
			z-index:10;
			
		}
		.header-item {
			color:white;
			background-color: black;
			padding: 20px;
			font-size: 19px;
			font-weight:bold;
			text-align: center;
			z-index:10;
			border-bottom:2px solid grey;
			border-top:2px solid grey;
		}
		.header-item:hover{
			color:darkgrey;
		}
		#header_logo{
			background-image: url('assets/header_logo.png');
			background-position:center;
			background-size:contain;
			background-repeat: no-repeat;
			padding-left:37px;
		}
		#mandlebulbs{
			width:100%;
			position:relative;
			top:12px;
			display:none;
			left:.5%;
		}
		.mandlebulb-item{
			width:24.5%;
		}
		#about{
			background-color:black;
			width:100%;
			height:100%;
			position:absolute;
			display:none;
		}
		#expRecapVideo{
			position:relative;
			top:30px;
			left:7.5%;
			width:85%;
			height:85%;
		}
	</style>
</head>
	<body>

		<div class="header">
			<div class="header-item" id="header_logo"></div>
			<div class="header-item"></div>
			<div class="header-item"></div>  
			<div class="header-item"></div>
			<div class="header-item"></div>
			<div class="header-item"></div>
			<div class="header-item" onclick="goToPage('mandlebulbs');">Mandlebulbs</div>  
			<div class="header-item" onclick="goToPage('ShaderMapper Demo');">ShaderMapper</div>
			<div class="header-item" onclick="goToPage('FlowMapper Demo');">FlowMapper</div>
			<div class="header-item" onclick="goToPage('about');">About Us</div>
		</div>

		<div id="mandlebulbs"></div>

		<div id="about">
			<iframe id="expRecapVideo" width="560" height="315" src="https://www.youtube.com/embed/yqjmwCJKtQE" frameborder="0" allowfullscreen></iframe>
			<!-- <video width="320" height="240" autoplay>
				<source src="http://www.nimbuslaboratory.com/static/NimbusPi/mini%20stage%20demo.mp4" type="video/mp4">
			</video> -->
		</div>

		<script>
			
			initGlobalVars();
			function initGlobalVars(){
				hasLoadedMandleBulbs=false;
				document.getElementById('mandlebulbs')
			}

			function goToPage(pageName){
				if(pageName=="mandlebulbs"){
					if(!hasLoadedMandleBulbs){
						loadMandlebulbs();
						hasLoadedMandleBulbs=true;
					}
					document.getElementById('mandlebulbs').style.display="inline";
					document.getElementById('renderCanvas').style.display="none";
					document.getElementById('about').style.display="none";
				}
				if(pageName=="FlowMapper Demo"){
					window.location.href="https://flowmapper.s3.amazonaws.com/index.html";
				}
				if(pageName=="ShaderMapper Demo"){
					window.location.href="http://www.nimbuslaboratory.com/ShaderMapper.html";
				}
				if(pageName=="about"){
					document.getElementById('mandlebulbs').style.display="none";
					document.getElementById('renderCanvas').style.display="none";
					document.getElementById('about').style.display="inline";
				}
				renderCanvas
			}

			function loadMandlebulbs(){
				document.getElementById('mandlebulbs').innerHTML='\
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%201.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%202.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%203.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%204.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%205.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%206.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%207.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%208.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%209.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2010.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2011.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2012.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2013.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2014.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2015.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2016.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2017.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2018.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2019.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2020.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2021.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2022.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2023.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2024.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2025.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2026.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2027.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2028.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2029.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2030.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2031.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2032.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2033.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2034.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2035.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2036.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2037.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2038.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2039.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2040.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2041.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2042.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2043.mp4#t=6.5" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2044.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2045.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2046.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2047.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2048.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2049.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2050.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2051.mp4" type="video/mp4"></video> \
				<video width="320" height="180" controls="" class="mandlebulb-item"> <source src="http://www.nimbuslaboratory.com/static/mandlebulbs/Fractals%2052.mp4" type="video/mp4"></video> '
			}
		</script>

	</body>

	<script type="module">
		import * as THREE from './dependancies/three.module.js';

		var camera, scene, renderer, materials = [], parameters;
		var mouseX = 0, mouseY = 0;
		var windowHalfX = window.innerWidth / 2;
		var windowHalfY = window.innerHeight / 2;

		init();
		animate();

		function init() {

			camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 2000 );
			camera.position.z = 1000;

			scene = new THREE.Scene();
			scene.fog = new THREE.FogExp2( 0x000000, 0.0008 );

			var geometry = new THREE.BufferGeometry();
			var vertices = [];

			var textureLoader = new THREE.TextureLoader();

			var sprite1 = textureLoader.load( 'sprites/sprite1.png' );
			var sprite2 = textureLoader.load( 'sprites/sprite2.png' );
			var sprite3 = textureLoader.load( 'sprites/sprite3.png' );

			for ( var i = 0; i < 10000; i ++ ) {

				var x = Math.random() * 2000 - 1000;
				var y = Math.random() * 2000 - 1000;
				var z = Math.random() * 2000 - 1000;

				vertices.push( x, y, z );

			}

			geometry.setAttribute( 'position', new THREE.Float32BufferAttribute( vertices, 3 ) );

			parameters = [
				[[ 1.0, 1.0, 1.0 ], sprite1, 30 ],
				[[ .5, 0.9, 1.0 ], sprite2, 20 ],
				[[ .6, 1.0, 0.5 ], sprite3, 25 ]
			];

			for ( var i = 0; i < parameters.length; i ++ ) {

				var color = parameters[ i ][ 0 ];
				var sprite = parameters[ i ][ 1 ];
				var size = parameters[ i ][ 2 ];

				materials[ i ] = new THREE.PointsMaterial( { size: size, map: sprite, blending: THREE.AdditiveBlending, depthTest: false, transparent: true } );
				materials[ i ].color.setHSL( color[ 0 ], color[ 1 ], color[ 2 ] );

				var particles = new THREE.Points( geometry, materials[ i ] );

				particles.rotation.x = Math.random() * 6;
				particles.rotation.y = Math.random() * 6;
				particles.rotation.z = Math.random() * 6;

				scene.add( particles );

			}

			//

			renderer = new THREE.WebGLRenderer();
			renderer.setPixelRatio( window.devicePixelRatio );
			renderer.setSize( window.innerWidth, window.innerHeight );
			renderer.domElement.id="renderCanvas";
			document.body.appendChild( renderer.domElement );

			// renderer.domElement.onclick=function(){
			// 	goToNextPage();
			// };

			//

			document.addEventListener( 'mousemove', onDocumentMouseMove, false );
			document.addEventListener( 'touchstart', onDocumentTouchStart, false );
			document.addEventListener( 'touchmove', onDocumentTouchMove, false );

			//

			window.addEventListener( 'resize', onWindowResize, false );

		}

		function onWindowResize() {

			windowHalfX = window.innerWidth / 2;
			windowHalfY = window.innerHeight / 2;

			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();

			renderer.setSize( window.innerWidth, window.innerHeight );

		}

		function onDocumentMouseMove( event ) {

			// mouseX = event.clientX - windowHalfX;
			// mouseY = event.clientY - windowHalfY;

		}

		function onDocumentTouchStart( event ) {

			if ( event.touches.length === 1 ) {

				event.preventDefault();

				mouseX = event.touches[ 0 ].pageX - windowHalfX;
				mouseY = event.touches[ 0 ].pageY - windowHalfY;

			}

		}

		function onDocumentTouchMove( event ) {

			if ( event.touches.length === 1 ) {

				event.preventDefault();

				mouseX = event.touches[ 0 ].pageX - windowHalfX;
				mouseY = event.touches[ 0 ].pageY - windowHalfY;

			}

		}

		function animate() {

			requestAnimationFrame( animate );

			render();

		}

		function render() {

			var time = Date.now() * 0.00005;

			camera.position.x += ( mouseX - camera.position.x ) * 0.05;
			camera.position.y += ( - mouseY - camera.position.y ) * 0.05;
			// camera.position.z -= 2.5;
			// if(camera.position.z<300.0){
			// 	goToNextPage();
			// }

			camera.lookAt( scene.position );

			for ( var i = 0; i < scene.children.length; i ++ ) {

				var object = scene.children[ i ];

				if ( object instanceof THREE.Points ) {

					if(i==0){
						object.rotation.x = time/7 * ( i < 4 ? i + 1 : - ( i + 1 ) );
					}else{
						object.rotation.y = time/7 * ( i < 4 ? i + 1 : - ( i + 1 ) );
					}

				}

			}

			renderer.render( scene, camera );

		}

		function goToNextPage(){
			window.location.replace("http://"+location.hostname+"/index_2.html");
		}
	
	</script>
	

